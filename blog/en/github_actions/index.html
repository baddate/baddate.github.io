<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/styles/github.css"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous  /> <link rel=stylesheet  href="/css/franklin.css"> <link rel=icon  href="/assets/favicon.ico"> <link rel=apple-touch-icon  sizes=180x180  href="/assets/apple-touch-icon.png"> <link rel=icon  type="image/png" sizes=32x32  href="/assets/favicon-32x32.png"> <link rel=icon  type="image/png" sizes=16x16  href="/assets/favicon-16x16.png"> <link rel=manifest  href="/assets/site.webmanifest"> <title>Alex's Blog | Make a TODO robot with Github Actions</title> <header> <a class=title  href="/"><h2>Alex</h2></a> <nav> <a href="/">Home</a> / <a href="/blog/zh">ZH-Blog</a> / <a href="/blog/en">EN-Blog</a> <div class=social-media > <a style="color: #101011;" href="https://github.com/baddate"><i class="fab fa-github"></i></a> <a style="color: #101011;" href="mailto:alexdemail@e.email"><i class="fas fa-envelope"></i></a> <a style="color: #101011;" href="https://twitter.com/realAlexHans"><i class="fab fa-twitter"></i></a> <a href="https://dev.to/baddate"> <img src="/assets/dev-badge.svg" alt="Alex Hans's DEV Profile" height=16  width=16 > </a> </div> </nav> </header> <main> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KJYYNYK3RK"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KJYYNYK3RK'); </script><div class=container > <ul> &#x1F516;<a href="/tag/Tips" style="text-transform: uppercase;color:#696969">Tips</a> &#x1F516;<a href="/tag/Git" style="text-transform: uppercase;color:#696969">Git</a> &#x1F516;<a href="/tag/Github" style="text-transform: uppercase;color:#696969">Github</a> &#x1F516;<a href="/tag/Github Actions" style="text-transform: uppercase;color:#696969">Github Actions</a> </ul> <h2 id=whats_github_actions ><a href="#whats_github_actions">What&#39;s Github Actions</a></h2> <p><a href="https://github.com/features/actions">Github Actions</a> is a <strong>CI</strong>&#40;continuous integration&#41; and <strong>CD</strong>&#40;continuous deployment&#41; service that help you automate your software development workflows in the same place you store code and collaborate on pull requests and issues. It was launched in October 2018 and was officially available to all users in November 2019. With Github Actions you can write individual tasks, called <em>actions</em>, and combine them to create a custom workflow. <em>Workflows</em> are custom automated processes that you can set up in your repository to build, test, package, release, or deploy any code project on GitHub.</p> <p>You can create workflows using actions defined in your repository, open source actions in a public repository on GitHub, or a published Docker container image. But <em>workflows in forked repositories don&#39;t run by default.</em> If you don&#39;t want to create your actions by yourself, you can discover actions in the <a href="https://github.com/marketplace?type&#61;actions">GitHub Marketplace</a>, also you can share your actions with the Marketplace.</p> <p>Ok, now let&#39;s go.</p> <h2 id=getting_started ><a href="#getting_started">Getting started</a></h2> <p>We can get this <em>Send Mail</em> Actions from <a href="https://github.com/marketplace/actions/send-email">here</a> or <a href="https://github.com/dawidd6/action-send-mail">source</a>. It help us send email to our inbox.</p> <h2 id=configuring_github_actions ><a href="#configuring_github_actions">Configuring Github Actions</a></h2> <p>We should create a directory named <code>.github/workflows</code> to store our workflow files at the root of our repository. In <code>.github/workflows</code>, add a <code>.yml</code> or <code>.yaml</code> file for our workflow. For example, <code>.github/workflows/auto.yml</code>.</p> <h3 id=first_we_set_a_trigger ><a href="#first_we_set_a_trigger">First we set a trigger</a></h3> <pre><code class="yaml hljs"><span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;GitHub Actions Email Bot&#x27;</span>

<span class=hljs-attr >on:</span>
    <span class=hljs-attr >schedule:</span>
      <span class=hljs-bullet >-</span> <span class=hljs-attr >cron:</span> <span class=hljs-string >&#x27;0 22 * * *&#x27;</span></code></pre> <p>In the above code, <code>name</code> is actions description, <code>on</code> is the trigger condition. We use the POSIX cron syntax to schedule the workflow. It is triggered at 6:00am&#40;UTC&#43;8&#41; everyday.</p> <h3 id=next_writing_a_todo_list_and_converting_it_from_markdown_to_html ><a href="#next_writing_a_todo_list_and_converting_it_from_markdown_to_html">Next writing a TODO list and converting it from markdown to html</a></h3> <pre><code class="yaml hljs"><span class=hljs-attr >runs-on:</span> <span class=hljs-string >ubuntu-latest</span>
    <span class=hljs-attr >steps:</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Checkout&#x27;</span>
            <span class=hljs-attr >uses:</span> <span class=hljs-string >actions/checkout@v2.0.0</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Get pandoc&#x27;</span>
            <span class=hljs-attr >run:</span>  <span class=hljs-string >sudo</span> <span class=hljs-string >apt-get</span> <span class=hljs-string >install</span> <span class=hljs-string >pandoc</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Convert My TODO List&#x27;</span>
            <span class=hljs-attr >run:</span>  <span class=hljs-string >pandoc</span> <span class=hljs-string >./TODO.md</span> <span class=hljs-string >&gt;</span> <span class=hljs-string >todo.html</span></code></pre> <h3 id=last_configuring_the_send_email_actions ><a href="#last_configuring_the_send_email_actions">Last configuring the send email actions</a></h3> <pre><code class="yaml hljs"><span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Send email&#x27;</span>
            <span class=hljs-attr >uses:</span> <span class=hljs-string >dawidd6/action-send-mail@v1.3.0</span>
            <span class=hljs-attr >with:</span>
              <span class=hljs-attr >server_address:</span> <span class=hljs-string >smtp.gmail.com</span>
              <span class=hljs-attr >server_port:</span> <span class=hljs-number >465</span>
              <span class=hljs-attr >username:</span> <span class=hljs-string >${{</span> <span class=hljs-string >secrets.MAIL_USERNAME</span> <span class=hljs-string >}}</span>
              <span class=hljs-attr >password:</span> <span class=hljs-string >${{</span> <span class=hljs-string >secrets.MAIL_PASSWORD</span> <span class=hljs-string >}}</span>
              <span class=hljs-attr >subject:</span> <span class=hljs-string >My</span> <span class=hljs-string >TODO</span> <span class=hljs-string >List</span>
              <span class=hljs-attr >body:</span> <span class=hljs-string >file://todo.html</span>
              <span class=hljs-attr >to:</span> <span class=hljs-string >test@example.com</span>
              <span class=hljs-attr >from:</span> <span class=hljs-string >TODO</span> <span class=hljs-string >List</span> <span class=hljs-string >Notification</span>
              <span class=hljs-attr >content_type:</span> <span class=hljs-string >text/html</span></code></pre> <p>For security, we should set our email <code>username</code> and <code>password</code> in the <code>settings/secrets</code> menu of the project. I set my email username like <code>MAIL_USERNAME</code>, password like <code>MAIL_PASSWORD</code>.</p> <p>Now we can receive a TODO list email every morning.</p> <hr /> <p>This is my full <code>todo.yaml</code>:</p> <pre><code class="yaml hljs"><span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;GitHub Actions Email Bot&#x27;</span>

<span class=hljs-attr >on:</span>
    <span class=hljs-attr >schedule:</span>
      <span class=hljs-bullet >-</span> <span class=hljs-attr >cron:</span> <span class=hljs-string >&#x27;0 22 * * *&#x27;</span>

<span class=hljs-attr >jobs:</span>
       <span class=hljs-attr >Todo_bot:</span>
        <span class=hljs-attr >runs-on:</span> <span class=hljs-string >ubuntu-latest</span>
        <span class=hljs-attr >steps:</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Checkout&#x27;</span>
            <span class=hljs-attr >uses:</span> <span class=hljs-string >actions/checkout@v2.0.0</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Get pandoc&#x27;</span>
            <span class=hljs-attr >run:</span>  <span class=hljs-string >sudo</span> <span class=hljs-string >apt-get</span> <span class=hljs-string >install</span> <span class=hljs-string >pandoc</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Get My TODO List&#x27;</span>
            <span class=hljs-attr >run:</span>  <span class=hljs-string >pandoc</span> <span class=hljs-string >./TODO.md</span> <span class=hljs-string >&gt;</span> <span class=hljs-string >result.html</span>
          <span class=hljs-bullet >-</span> <span class=hljs-attr >name:</span> <span class=hljs-string >&#x27;Send email&#x27;</span>
            <span class=hljs-attr >uses:</span> <span class=hljs-string >dawidd6/action-send-mail@v1.3.0</span>
            <span class=hljs-attr >with:</span>
              <span class=hljs-attr >server_address:</span> <span class=hljs-string >smtp.gmail.com</span>
              <span class=hljs-attr >server_port:</span> <span class=hljs-number >465</span>
              <span class=hljs-attr >username:</span> <span class=hljs-string >${{</span> <span class=hljs-string >secrets.MAIL_USERNAME</span> <span class=hljs-string >}}</span>
              <span class=hljs-attr >password:</span> <span class=hljs-string >${{</span> <span class=hljs-string >secrets.MAIL_PASSWORD</span> <span class=hljs-string >}}</span>
              <span class=hljs-attr >subject:</span> <span class=hljs-string >TODO</span> <span class=hljs-string >List</span>
              <span class=hljs-attr >body:</span> <span class=hljs-string >file://result.html</span>
              <span class=hljs-attr >to:</span> <span class=hljs-string >test@example.com</span>
              <span class=hljs-attr >from:</span> <span class=hljs-string >TODO</span> <span class=hljs-string >List</span> <span class=hljs-string >Notification</span>
              <span class=hljs-attr >content_type:</span> <span class=hljs-string >text/html</span></code></pre> </div> </main> </div> <footer> &copy; Alex. Made with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and <a href="https://julialang.org">The Julia Programming Language</a>. </footer>