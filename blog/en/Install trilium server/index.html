<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/ocean.min.css"> <link rel=stylesheet  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous  /> <link rel=stylesheet  href="/css/franklin.css"> <link rel=icon  href="/assets/favicon.ico"> <title>Alex's Blog | Install Trilium server and config TLS with Let's Encrypt</title> <header> <a class=title  href="/"><h2>Alex</h2></a> <nav> <a href="/">Home</a> / <a href="/blog/zh">ZH-Blog</a> / <a href="/blog/en">EN-Blog</a> <div class=social-media > <a style="color: #ffffff;" href="https://github.com/abhishalya"><i class="fab fa-github"></i></a> <a style="color: #ffffff;" href="https://www.linkedin.com/in/abhishalya/"><i class="fab fa-linkedin"></i></a> <a style="color: #ffffff;" href="https://twitter.com/abhishalya"><i class="fab fa-twitter"></i></a> </div> </nav> </header> <main> <div class=container ><blockquote> <p>OS: CentOS7 Let&#39;s Encrypt Client: Certbot Package: trilium-server</p> </blockquote> <h1 id=certbot ><a href="#certbot">Certbot</a></h1> <ol> <li><p>Enable the EPEL repository</p> </ol> <pre><code class="julia hljs">$ yum -y install yum-utils
$ yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional</code></pre> <ol start=2 > <li><p>Installation</p> </ol> <pre><code class="julia hljs">$ sudo yum install certbot</code></pre>
<h1 id=tls ><a href="#tls">TLS</a></h1>
<ol>
<li><p>Config</p>

</ol>
<pre><code class="julia hljs">$ sudo certbot certonly --standalone -d baddate.cn -d www.baddate.cn</code></pre>
<ol start=2 >
<li><p>Automating renewal</p>

</ol>
<p>refer to this <a href="https://certbot.eff.org/docs/using.html#renewal">official article</a></p>
<h1 id=trilium ><a href="#trilium">Trilium</a></h1>
<ol>
<li><p>modify <code>~/trilium-data/config.ini</code> with <code>vim</code></p>

</ol>
<pre><code class="julia hljs">[General]
<span class=hljs-comment ># Instance name can be used to distinguish between different instances</span>
instanceName=

[Network]
<span class=hljs-comment ># port setting is relevant only for web deployments, desktop builds run on random free port</span>
port=<span class=hljs-number >8080</span>
<span class=hljs-comment ># true for TLS/SSL/HTTPS (secure), false for HTTP (unsecure).</span>
https=<span class=hljs-literal >true</span> 
<span class=hljs-comment ># path to certificate (run &quot;bash bin/generate-cert.sh&quot; to generate self-signed certificate). Relevant only if https=true</span>
certPath=/etc/letsencrypt/live/[example.com]/fullchain.pem
keyPath=/etc/letsencrypt/live/[example.com]/privkey.pem</code></pre>
</div>  </main>
  
    </div>  
    
    
        


    
    <footer>
      &copy; Alex.
      Made with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>
      and <a href="https://julialang.org">The Julia Programming Language</a>.
    </footer>